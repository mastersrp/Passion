varying vec2 uv;
varying vec4 gl_Color;
uniform sampler2D tex;

void main()
{
	float hdist = 1.0f / 1280.0f;
	float vdist = 1.0f / 720.0f;
	float samplesize = 8.0f;
	float mul = 1.0f / samplesize / 8.0f;
	
	gl_FragColor = vec4( 0.0f, 0.0f, 0.0f, 0.0f );
	
	for ( float i = 1.0f; i <= samplesize; i++ )
	{
		gl_FragColor += texture2D( tex, vec2( uv.x - hdist * i, uv.y ) ) * gl_Color * mul;
		gl_FragColor += texture2D( tex, vec2( uv.x + hdist * i, uv.y ) ) * gl_Color * mul;
		gl_FragColor += texture2D( tex, vec2( uv.x, uv.y - vdist * i ) ) * gl_Color * mul;
		gl_FragColor += texture2D( tex, vec2( uv.x, uv.y + vdist * i ) ) * gl_Color * mul;
		gl_FragColor += texture2D( tex, vec2( uv.x - hdist * i, uv.y - vdist * i ) ) * gl_Color * mul;
		gl_FragColor += texture2D( tex, vec2( uv.x + hdist * i, uv.y + vdist * i ) ) * gl_Color * mul;
		gl_FragColor += texture2D( tex, vec2( uv.x - hdist * i, uv.y + vdist * i ) ) * gl_Color * mul;
		gl_FragColor += texture2D( tex, vec2( uv.x + hdist * i, uv.y - vdist * i ) ) * gl_Color * mul;
	}
}